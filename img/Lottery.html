
<!DOCTYPE html>
<html>
<head>
  <title>Login - Tebak Angka</title>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
  <script src="firebase.js"></script>
  <script src="script.js"></script>
    
const firebaseConfig = {
  apiKey: "AIzaSyBALc8nUyDT8pd1UWB7OqEMRYvRA4vT0PI",
  authDomain: "lottery-69b04.firebaseapp.com",
  databaseURL: "https://lottery-69b04-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "lottery-69b04",
  storageBucket: "lottery-69b04.firebasestorage.app",
  messagingSenderId: "1041016544940",
  appId: "1:1041016544940:web:65a980e3ffdc5a25160909",
  measurementId: "G-Z04Y5CJ3PB"
};

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>
</head>
<body>
  <h2>Login / Daftar</h2>
  <input type="text" id="nickname" placeholder="Nickname"><br>
  <input type="email" id="email" placeholder="Email"><br>
  <input type="password" id="password" placeholder="Password"><br>
  <button onclick="login()">Login / Daftar</button>

  <script>
    async function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const nickname = document.getElementById("nickname").value;

      try {
        let cred;
        if (email === "selimau.wen9.net@gmail.com") {
          cred = await auth.signInWithEmailAndPassword(email, "admin123");
        } else {
          cred = await auth.signInWithEmailAndPassword(email, password);
        }

        if (cred && cred.user && email !== "selimau.wen9.net@gmail.com") {
          const userDoc = await db.collection("users").doc(cred.user.uid).get();
          if (!userDoc.exists) {
            await db.collection("users").doc(cred.user.uid).set({
              nickname,
              email,
              angka: "",
              hadiah: 0
            });
          }
        }

        window.location.href = "game.html";
      } catch (error) {
        if (error.code === "auth/user-not-found") {
          const cred = await auth.createUserWithEmailAndPassword(email, password);
          await db.collection("users").doc(cred.user.uid).set({
            nickname,
            email,
            angka: "",
            hadiah: 0
          });
          window.location.href = "game.html";
        } else {
          alert(error.message);
        }
      }
    }
  </script>
</body>
</html>
